<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>S C Building Services Ltd — Employee Hub Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f2b3b" />

  <!-- Icons (kept so iOS/Android still use the app icon when added to Home Screen) -->
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />
  <link rel="manifest" href="manifest.json" />

  <style>
    :root { color-scheme: light dark; }
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      text-align: center;
      margin: 0; padding: 24px;
      background: Canvas; color: CanvasText;
    }
    .wrap {
      max-width: 520px; margin: 10vh auto; padding: 28px;
      border-radius: 16px; box-shadow: 0 6px 24px rgba(0,0,0,.08);
      background: rgba(127,127,127,0.04);
    }
    h1 { font-size: 26px; margin: 0 0 20px; font-weight: 700; line-height: 1.2; }
    input {
      padding: 18px; margin: 10px 0; width: 100%; font-size: 18px;
      border-radius: 10px; border: 1px solid #d0d7de; background: Field; color: FieldText;
    }
    button {
      padding: 14px 24px; font-size: 18px; cursor: pointer;
      background: #0f766e; color: #fff; border: none; border-radius: 10px;
      width: 100%; margin-top: 6px;
    }
    #message { margin-top: 14px; font-size: 16px; min-height: 22px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>S C Building Services Ltd — Employee Hub Login</h1>

    <form onsubmit="event.preventDefault(); checkUser();">
      <input type="email" id="email" placeholder="Enter your work email" required />
      <button type="submit">Continue</button>
    </form>

    <p id="message"></p>
  </div>

  <script>
    // --- Allowed users (add as needed) ---
    const users = [
      { id: 1, email: "sean7colley@gmail.com" },           // Sean (Director)
      { id: 2, email: "leonardgreeff@glosscalm.com" }, 
      { id: 3, email: "Christopher_wellsbury@sky.com" }, 
      { id: 4, email: "Leecolley91@hotmail.co.uk" }, 
      { id: 5, email: "Lukeblakemore@live.com" },
      { id: 6, email: "shaidurant1244@icloud.com" },
      { id: 7, email: "jamie@scbuild.co.uk" },
      { id: 8, email: "josh.bridjes@hotmail.co.uk" },
    ];

    // --- Optional logging to Google Sheet via Apps Script (replace URL) ---
    const APPS_SCRIPT_URL = "REPLACE_WITH_YOUR_APPS_SCRIPT_WEB_APP_URL";
    function logEmailToSheet(email) {
      if (!APPS_SCRIPT_URL || APPS_SCRIPT_URL.startsWith("REPLACE_")) return;
      fetch(APPS_SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify({ email }),
        headers: { "Content-Type": "application/json" },
        mode: "no-cors"
      }).catch(err => console.error("Logging failed:", err));
    }

    // --- Login check + redirect ---
    function checkUser() {
      const emailInput = document.getElementById("email").value.trim().toLowerCase();
      const user = users.find(u => u.email.toLowerCase() === emailInput);

      if (user) {
        document.getElementById("message").innerText = "Access granted. Redirecting…";
        try { sessionStorage.setItem("scb_user_email", emailInput); } catch (e) {}
        logEmailToSheet(emailInput);

        // Redirect to the Google Site
        setTimeout(() => {
          window.location.href = "https://sites.google.com/view/s-c-building-services-ltd-hub/home";
        }, 600);
      } else {
        document.getElementById("message").innerText = "Email not found. Use your approved work email.";
      }
    }
  </script>
</body>
</html>
